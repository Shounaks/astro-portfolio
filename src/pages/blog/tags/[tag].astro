---
import TagLayout from "../../../layouts/TagLayout.astro";
import { posts } from "../../../collection";

export async function getStaticPaths() {
	const tags = posts.map((item) => item.data.tags).flat();
	return tags.map((tag) => ({ params: { tag: tag } }));
}
const { tag } = Astro.params;
---

<TagLayout>
	<p class="text-white p-2">Posts tagged with {tag}</p>
	<div class="p-2">
		<ul class="pl-5 flex flex-col gap-2">
			{
				posts
					.filter((post) => tag && post.data.tags.includes(tag))
					.map((post) => (
						<a
							href={`/blog/${post.slug}/`}
							class="hover:underline underline-offset-8 list-disc"
						>
							<li class="text-white"> {post.data.title}</li>
						</a>
					))
			}
		</ul>
	</div>
</TagLayout>
